---
import MainLayout from "@/layouts/main.astro";
import GalleryGrid from "@/components/gallery/GalleryGrid.astro";
import { ArrowLeft } from "lucide-react";

import type { GalleryManifest } from "@/features/gallery/types";
// Generated at build/dev time by `scripts/generate-gallery.mjs`
import manifestJson from "@/generated/gallery.manifest.json";

const manifest = manifestJson as unknown as GalleryManifest;
const photos = Array.isArray(manifest?.photos) ? manifest.photos : [];
const preloadPhotos = photos.slice(0, 12);

const pageTitle = "Gallery";
const pageDescription = "A collection of photographs.";
const canonical = Astro.url.href;
---

<MainLayout
        seo={{
			title: pageTitle,
			description: pageDescription,
			canonical,
			robots: "index,follow",
			openGraph: {
				title: pageTitle,
				description: pageDescription,
				type: "website",
				siteName: "Subhajit Kundu",
			},
			twitter: {
				card: "summary_large_image",
				title: pageTitle,
				description: pageDescription,
			},
		}}
>
	{preloadPhotos.map((photo, i) => (
		<link
			slot="head"
			rel="preload"
			as="image"
			href={photo.src}
			fetchpriority={i === 0 ? "high" : "low"}
		/>
	))}

    <main class="px-6 sm:px-10 md:px-16 lg:px-24 py-20 lg:py-32 max-w-[1100px] mx-auto reveal-children">
        <div class="max-w-[600px] mb-10">
            <h1 class="flex items-center gap-2">
				<a href="/"><ArrowLeft className="w-5 h-5 cursor-pointer" /></a>
				My Gallery
			</h1>
            <p class="mt-2 lg:mt-8 text-sm opacity-80">Photography has always been one of my biggest passion. Here i take the opportunity to share some of the shots i've taken that holds the most significant meaning to me.</p>
        </div>

        <GalleryGrid photos={photos} />
    </main>
</MainLayout>

